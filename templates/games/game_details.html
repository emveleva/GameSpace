{% extends "base.html" %}
{% load static %}

{% block content %}
    {% if game %}
        <div class="game-details">
            <h1 class="game-title">{{ game.name }}</h1>

            <div class="game-details-layout">
                <div class="game-info">
                    <p>Platform:
                        {% for platform in game.platforms.all %}
                            {{ platform.name }}
                        {% endfor %}
                    </p>
                    <p>Release date: {{ game.release_date }}</p>
                    <p>{{ game.description }}</p>
                    <p>
                        Genres:
                        {% for genre in game.genres.all %}
                            <a href="{% url 'games_by_genre' genre.slug %}">{{ genre.name }}</a>{% if not forloop.last %}, {% endif %}
                        {% endfor %}
                    </p>

                    {% if avg_rating %}
                        <p>Average Rating: {{ avg_rating|floatformat:1 }} / 5</p>
                    {% else %}
                        <p>No reviews yet.</p>
                    {% endif %}
                </div>

                <div class="game-image">
                    {% if game.image_url %}
                        <img src="{{ game.image_url }}" alt="{{ game.name }}">
                    {% else %}
                        <img src="{% static 'images/empty-page.png' %}" alt="placeholder">
                    {% endif %}
                </div>

                <a href="{% url 'edit_game' game.id %}" class="btn btn-primary">
                    Edit Game
                </a>
                <a href="{% url 'delete_game' game.id %}" class="btn btn-danger">
                    Delete Game
                </a>
            </div>
        </div>
    {% endif %}
{% endblock %}